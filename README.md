# To-Do List CRUD Приложение Тихонова Роза (501455), Наумкина Александра (505277), Чикомазова Алиса (504497)
## Скринкаст: https://disk.yandex.ru/i/FKD9w6lQx18Cbg
## Описание проекта
Веб-приложение для управления задачами (To-Do List) с поддержкой CRUD операций (Create, Read, Update, Delete). Приложение реализовано на Flask с использованием SQLite базы данных и объектно-ориентированного подхода.

## Структура проекта
```
.
├── models/                    # Модели данных
│   ├── __init__.py
│   ├── note.py              # Модель заметки (задачи)
│   ├── user.py              # Модель пользователя
│   └── users_notes.py       # Модель связи пользователь-заметка
├── templates/               # HTML шаблоны
│   └── index.html          # Главная страница
├── app.py                   # Основное Flask приложение
├── database.db              # SQLite база данных (создается автоматически)
├── requirements.txt         # Зависимости Python
└── README.md               # Документация
```


## Описание файлов

### 1. `models/note.py` - Модель заметки

**Назначение:** Определяет структуру и валидацию данных для заметок (задач).

**Класс `Note`:**
```python
class Note:
    def __init__(self, id: str, title: str, discription: str, 
                 data_create: str, data_update: str, tags: str):
```

**Атрибуты:**
- `id` (str) - уникальный идентификатор заметки
- `title` (str) - заголовок заметки
- `discription` (str) - описание/содержание заметки
- `data_create` (str) - дата и время создания
- `data_update` (str) - дата и время последнего обновления
- `tags` (str) - теги заметки (разделенные запятыми)

**Properties (геттеры/сеттеры):**
- Все сеттеры включают проверку типов данных
- `id`: проверка на непустую строку
- Остальные поля: проверка на строковый тип

**Исключения:**
- `TypeError` - при несоответствии типа данных
- `ValueError` - при некорректных значениях

---

### 2. `models/user.py` - Модель пользователя

**Назначение:** Определяет структуру пользователя с валидацией данных.

**Класс `User`:**
```python
class User:
    def __init__(self, user_id: int, name: str, email: str, password: str):
```

**Атрибуты:**
- `id` (int) - уникальный идентификатор пользователя
- `name` (str) - имя пользователя
- `email` (str) - email адрес
- `password` (str) - пароль

**Properties (геттеры/сеттеры):**
- `id`: проверка на положительное целое число
- `name`: проверка на непустую строку
- `email`: проверка на непустую строку
- `password`: проверка длины (минимум 4 символа)

**Исключения:**
- `TypeError` - при несоответствии типа данных
- `ValueError` - при некорректных значениях

---

### 3. `models/users_notes.py` - Модель связи

**Назначение:** Определяет связь "многие-ко-многим" между пользователями и заметками.

**Класс `UserNote`:**
```python
class UserNote:
    def __init__(self, user: User, note: Note, un_id: int):
```

**Атрибуты:**
- `user` (User) - объект пользователя
- `note` (Note) - объект заметки
- `id` (int) - уникальный идентификатор связи

**Properties (геттеры/сеттеры):**
- `id`: проверка на положительное целое число
- `user`: проверка типа User
- `note`: проверка типа Note

**Исключения:**
- `TypeError` - при несоответствии типа объекта
- `ValueError` - при некорректном ID

---

### 4. `templates/index.html` - HTML шаблон

**Назначение:** Главная страница приложения с интерфейсом управления задачами.

**Особенности:**
- Использует Bootstrap 5 для стилизации
- Состоит из двух основных секций:
  1. Форма добавления новой задачи
  2. Таблица со списком существующих задач

**Структура формы добавления:**
```html
<form method="POST" action="/add">
  <input name="title">      <!-- Заголовок задачи -->
  <textarea name="description"></textarea>  <!-- Описание -->
  <input name="tags">       <!-- Теги (через запятую) -->
  <button type="submit">Submit</button>
</form>
```

**Таблица задач:**
- Отображает все атрибуты заметки
- Теги отображаются как badges
- Для каждой задачи есть кнопка удаления

**Jinja2 шаблонизация:**
- `{% for note in notes %}` - цикл по заметкам
- `{{ note.title }}` - вывод значения
- `{% if note.tags %}` - условный оператор
- `{{ tag.strip() }}` - вызов метода Python

---

### 5. `app.py` - Основное Flask приложение

**Назначение:** Точка входа приложения, содержит маршруты и бизнес-логику.

**Импортируемые библиотеки:**
- `flask` - веб-фреймворк
- `sqlite3` - работа с базой данных
- `datetime` - работа с датами и временем

---

#### Функция `get_db()`
```python
def get_db() -> sqlite3.Connection
```
**Назначение:** Создает и возвращает соединение с SQLite базой данных.

**Возвращаемое значение:** Объект соединения `sqlite3.Connection`

---

#### Функция `init_db()`
```python
def init_db() -> None
```
**Назначение:** Инициализирует базу данных, создает таблицы и начальные данные.

**Создаваемые таблицы:**
1. **users** - пользователи системы
   ```sql
   CREATE TABLE users (
       id INTEGER PRIMARY KEY AUTOINCREMENT,
       name TEXT NOT NULL,
       email TEXT UNIQUE NOT NULL,
       password TEXT NOT NULL
   )
   ```

2. **notes** - заметки/задачи
   ```sql
   CREATE TABLE notes (
       id TEXT PRIMARY KEY,
       title TEXT NOT NULL,
       description TEXT,
       data_create TEXT NOT NULL,
       data_update TEXT NOT NULL,
       tags TEXT
   )
   ```

3. **user_notes** - связи пользователь-заметка
   ```sql
   CREATE TABLE user_notes (
       id INTEGER PRIMARY KEY AUTOINCREMENT,
       user_id INTEGER,
       note_id TEXT,
       FOREIGN KEY (user_id) REFERENCES users (id),
       FOREIGN KEY (note_id) REFERENCES notes (id)
   )
   ```

---

#### Маршрут `/` (главная страница)
```python
@app.route('/')
def index() -> str
```
**Назначение:** Отображает главную страницу со списком задач.

**Логика работы:**
1. Получает первого пользователя из БД
2. Получает все заметки этого пользователя
3. Конвертирует записи БД в объекты `Note`
4. Рендерит шаблон `index.html` с данными

**Возвращаемое значение:** HTML страница (str)

**Исключения:** Логирует ошибки создания объектов `Note`

---

#### Маршрут `/add` (добавление заметки)
```python
@app.route('/add', methods=['POST'])
def add_note() -> werkzeug.wrappers.Response
```
**Назначение:** Обрабатывает добавление новой заметки.

**Параметры запроса (POST):**
- `title` (str) - заголовок задачи
- `description` (str) - описание задачи
- `tags` (str) - теги (опционально)

**Логика работы:**
1. Генерирует уникальный ID на основе timestamp
2. Создает объект `Note`
3. Сохраняет заметку в таблицу `notes`
4. Создает связь в таблице `user_notes`
5. Перенаправляет на главную страницу

**ID генерация:** `datetime.now().strftime('%Y%m%d%H%M%S%f')`

**Временные метки:** `datetime.now().strftime('%Y-%m-%d %H:%M:%S')`

**Возвращаемое значение:** Перенаправление (302) на `/`

**Исключения:** Логирует ошибки, откатывает транзакцию

---

#### Маршрут `/delete/<note_id>` (удаление заметки)
```python
@app.route('/delete/<note_id>')
def delete_note(note_id: str) -> werkzeug.wrappers.Response
```
**Назначение:** Удаляет заметку по ID.

**Параметры:**
- `note_id` (str) - ID удаляемой заметки

**Логика работы:**
1. Удаляет связь из `user_notes`
2. Удаляет заметку из `notes`
3. Перенаправляет на главную страницу

**Возвращаемое значение:** Перенаправление (302) на `/`

---

#### Запуск приложения
```python
if __name__ == '__main__':
    init_db()
    app.run(debug=True)
```

## Установка и запуск

### 1. Установка зависимостей
```bash
pip install -r requirements.txt
```

**requirements.txt:**
```
flask>=2.3.0
```

### 2. Запуск приложения
```bash
python app.py
```

### 3. Доступ к приложению
- **Локально:** http://localhost:5000
- **Главная страница:** http://localhost:5000/
- **Добавление задачи:** POST http://localhost:5000/add
- **Удаление задачи:** GET http://localhost:5000/delete/<note_id>

---

## Использование

### Добавление задачи
1. Заполните форму "Add New Task"
2. Укажите заголовок (обязательно)
3. Добавьте описание (опционально)
4. Укажите теги через запятую (опционально)
5. Нажмите "Submit"

### Просмотр задач
- Все задачи отображаются в таблице
- Показывается: заголовок, описание, даты создания/обновления, теги
- Теги отображаются как цветные badges

### Удаление задачи
- Нажмите кнопку "Delete" в строке нужной задачи
- Задача немедленно удаляется из БД

---

## Технические требования

### Минимальные требования:
- Python 3.7 или выше
- SQLite3 (входит в стандартную библиотеку Python)
- Веб-браузер с поддержкой HTML5

---

